## –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω: –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Python, FastAPI)

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç‚Äë–º–∞–≥–∞–∑–∏–Ω–∞ –Ω–∞ Python –≤ –≤–∏–¥–µ –Ω–∞–±–æ—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** (auth)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∫–∞—Ç–∞–ª–æ–≥–∞** (catalog)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤** (order, transaction outbox)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π** (payment, –ø—Ä–∏–º–µ—Ä —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (notification, –ø—Ä–∏–º–µ—Ä —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏)
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: RabbitMQ, Redis, PostgreSQL, Docker Compose.

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **–ë–î**: PostgreSQL (`db`)
- **–ö–µ—à**: Redis (`redis`)
- **–®–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö**: RabbitMQ (`rabbitmq`)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**: `auth_service`
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∫–∞—Ç–∞–ª–æ–≥–∞**: `catalog_service`
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤ (outbox)**: `order_service`
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)**: `payment_service`
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)**: `notification_service`
- **Telegram-–±–æ—Ç (UI)**: `telegram_bot`
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `web_app`

### üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞** –∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

1. **–•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è (Choreography)** ‚Äî —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è RabbitMQ
   - `order_service` –ø—É–±–ª–∏–∫—É–µ—Ç `order.created`
   - `payment_service` –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ ‚Üí –ø—É–±–ª–∏–∫—É–µ—Ç `payment.processed`
   - `notification_service` –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

2. **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (Orchestration)** ‚Äî —á–µ—Ä–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP-–≤—ã–∑–æ–≤—ã
   - `order_service` –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å
   - –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `payment_service` –∏ `notification_service`

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:** —Å–º. [docs/ORCHESTRATION_VS_CHOREOGRAPHY.md](docs/ORCHESTRATION_VS_CHOREOGRAPHY.md)
- **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (UI)**: `web_app`

---

## –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ö–µ–º–∞:

```text
        [–ö–ª–∏–µ–Ω—Ç / –ë—Ä–∞—É–∑–µ—Ä / Telegram]
                   |
                   v
      +----------------+      +----------------+
      |   Web UI       |      | Telegram bot   |
      | (web_app)      |      | (telegram_bot) |
      +----------------+      +----------------+
                   |                  |
                   +---------+--------+
                             |
                             v
          +--------------------+
          |   auth_service     |
          |  JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è|
          +--------------------+
                   |
            (JWT-—Ç–æ–∫–µ–Ω)
                   |
                   v
    +---------------------------+
    |       catalog_service     |
    |  /products  (—á—Ç–µ–Ω–∏–µ)      |
    |  –∫–µ—à –≤ Redis              |
    +---------------------------+
                   |
                   | (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞)
                   v
    +---------------------------+
    |       order_service       |
    |  /orders (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)    |
    |  /orders/orchestrated     |
    |  Postgres + outbox        |
    +---------------------------+
                   |
          (—Å–æ–±—ã—Ç–∏–µ order.created)
                   v
      +-------------------------+
      |        RabbitMQ         |
      |  exchange: shop_events  |
      +-------------------------+
                   |
        +----------+----------+
        |                     |
        v                     v
+----------------+  +------------------+
| payment_service|  |notification_service|
| (–ø–æ–¥–ø–∏—Å—á–∏–∫)    |  | (–ø–æ–¥–ø–∏—Å—á–∏–∫)       |
| order.created  |  | payment.processed |
+----------------+  +------------------+
        |                     |
        | (payment.processed) |
        +----------+----------+
                   |
                   v
         (notification.sent)
```

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- –ö–ª–∏–µ–Ω—Ç —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ—Ç JWT‚Äë—Ç–æ–∫–µ–Ω –∏–∑ `auth_service`, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –¥—Ä—É–≥–∏–º —Å–µ—Ä–≤–∏—Å–∞–º.
- `catalog_service` —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–µ—à–∏—Ä—É—è –∏—Ö –≤ Redis.
- **–•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è:** `order_service` —Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑ –∏ –ø—É–±–ª–∏–∫—É–µ—Ç `order.created` ‚Üí `payment_service` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ ‚Üí `notification_service` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–≤—Å–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ RabbitMQ).
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è:** `order_service` –º–æ–∂–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ HTTP-–≤—ã–∑–æ–≤—ã (`/orders/orchestrated`).

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–æ–±—â–∞—è –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤)

- **`db` (PostgreSQL)**  
  - –û–±—â–∞—è –ë–î –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ (order_service, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã).
  - –ü–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ —Å–µ—Ä–≤–∏—Å `db` –≤ `docker-compose.yml`.

- **`redis` (Redis)**  
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **`catalog_service`** –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ (`catalog:products`).

- **`rabbitmq` (RabbitMQ + management UI)**  
  - –®–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.
  - **`order_service`** –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è `order.created` –≤ exchange `shop_events`.
  - –ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç‚Äë–ø–∞–Ω–µ–ª—å –ø–æ –ø–æ—Ä—Ç—É `15672` (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `guest/guest`).

### –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `web_app`

- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `services/web_app/app/main.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
  - –£–¥–æ–±–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
  - –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö API (`auth_service`, `catalog_service`, `order_service`) —á–µ—Ä–µ–∑ HTTP.
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤.
- **–ú–∞—Ä—à—Ä—É—Ç—ã**:
  - `GET /` ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞.
  - `GET/POST /register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - `GET/POST /login`, `POST /logout`.
  - `GET /catalog`, `POST /order`.
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Å—Å–∏–æ–Ω–Ω—ã–µ cookie (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `WEB_SESSION_SECRET`).

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ `auth_service`

- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `services/auth_service/app/main.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
  - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è **–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **JWT**.
  - –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –º–æ–Ω–æ–ª–∏—Ç –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∑–¥–µ—Å—å.

- **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** (–ø–æ—Ä—Ç `8001`):
  - `POST /auth/register` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (email + –ø–∞—Ä–æ–ª—å), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT.
  - `POST /auth/token` ‚Äî –≤—ã–¥–∞—á–∞ JWT –ø–æ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é.
  - `GET /auth/verify`  
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ `Authorization: Bearer <token>` (—É–ø—Ä–æ—â—ë–Ω–Ω–æ) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - `GET /health` ‚Äî —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞.

---

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∫–∞—Ç–∞–ª–æ–≥–∞ `catalog_service`

- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `services/catalog_service/app/main.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
  - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤.
  - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è **–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Redis**.

- **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** (–ø–æ—Ä—Ç `8002`):
  - `GET /products`  
    - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞).
    - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Redis –≤ –∫–ª—é—á `catalog:products` —Å TTL 60 —Å–µ–∫—É–Ω–¥.
    - –ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–µ—à–∞.
  - `GET /health` ‚Äî —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞.

---

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤ `order_service` (transaction outbox + RabbitMQ)

- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `services/order_service/app/main.py`
- **–ë–î/ORM**: `services/order_service/app/db.py`  
  –¢–∞–±–ª–∏—Ü—ã:
  - `orders` ‚Äî –∑–∞–∫–∞–∑—ã (id, email, total_amount, status, created_at).
  - `outbox_messages` ‚Äî outbox –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π:
    - `event_type`, `payload` (JSON), `status` (`pending`/`sent`), –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏.

- **–ü–∞—Ç—Ç–µ—Ä–Ω Transaction Outbox**:
  - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:
    - –í –æ–¥–Ω–æ–π **–ë–î‚Äë—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**:
      - —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `orders`;
      - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `outbox_messages` —Å `event_type = "order_created"` –∏ payload `{order_id, customer_email, total_amount}`.
  - –û—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–æ–≤–æ–π –≤–æ—Ä–∫–µ—Ä `publish_outbox_messages`:
    - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç `pending`‚Äë—Å–æ–æ–±—â–µ–Ω–∏—è;
    - –ø—É–±–ª–∏–∫—É–µ—Ç –≤ RabbitMQ (exchange `shop_events`, routing key `order.created`);
    - –ø–æ–º–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ `sent`.
  
  **–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:** –°–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ —Å–µ—Ä–≤–∏—Å–∞.

üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö:** —Å–º. [docs/OUTBOX_INBOX_PATTERNS.md](docs/OUTBOX_INBOX_PATTERNS.md)

- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã** (–ø–æ—Ä—Ç `8003`):
  - `GET /health`
  - `GET /orders` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ (–∏–∑ —Å–≤–æ–µ–π —Ç–∞–±–ª–∏—Ü—ã `orders`).
  - `POST /orders` ‚Äî **—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è**: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π —Å–æ–±—ã—Ç–∏—è `order.created` –≤ RabbitMQ.
  - `POST /orders/orchestrated` ‚Äî **–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π –≤—Å–µ—Ö —à–∞–≥–æ–≤.

---

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π `payment_service` (–ø—Ä–∏–º–µ—Ä —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏ + Transaction Inbox)

- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `services/payment_service/app/main.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è –∑–∞–∫–∞–∑–æ–≤.
  - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è **—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏** ‚Äî –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏–∑ RabbitMQ.
  - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è **Transaction Inbox** ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏.

- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è + Inbox)**:
  1. –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—á–µ—Ä–µ–¥—å `payment_queue` –≤ RabbitMQ
  2. –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `order.created` –æ—Ç `order_service`
  3. **Transaction Inbox**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å –ª–∏ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–∞–Ω–µ–µ (–ø–æ `message_id`)
  4. –ï—Å–ª–∏ –Ω–æ–≤–æ–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `inbox_messages` + –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ (–≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
  5. –ï—Å–ª–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
  6. –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `payment.processed` –∏–ª–∏ `payment.failed`

- **–ë–î/ORM**: `services/payment_service/app/database.py`
  - –¢–∞–±–ª–∏—Ü—ã:
    - `payments` ‚Äî –ø–ª–∞—Ç–µ–∂–∏ (order_id, payment_id, amount, status)
    - `inbox_messages` ‚Äî inbox –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (message_id, event_type, payload, status)

- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã** (–ø–æ—Ä—Ç `8004`):
  - `GET /health` ‚Äî —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞.
  - `POST /payments/process` ‚Äî –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–∑ `order_service`).
  - `GET /payments` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π –∏–∑ –ë–î.

üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö:** —Å–º. [docs/OUTBOX_INBOX_PATTERNS.md](docs/OUTBOX_INBOX_PATTERNS.md)

---

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π `notification_service` (–ø—Ä–∏–º–µ—Ä —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏)

- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: `services/notification_service/app/main.py`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç–∞–º (email/SMS).
  - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è **—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–∏** ‚Äî –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏–∑ RabbitMQ.

- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)**:
  1. –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—á–µ—Ä–µ–¥—å `notification_queue` –≤ RabbitMQ
  2. –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `payment.processed` –æ—Ç `payment_service`
  3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É (–∏–º–∏—Ç–∞—Ü–∏—è)
  4. –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `notification.sent`

- **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã** (–ø–æ—Ä—Ç `8005`):
  - `GET /health` ‚Äî —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞.
  - `POST /notifications/send` ‚Äî –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–∑ `order_service`).
  - `GET /notifications` ‚Äî —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∑–∞–≥–ª—É—à–∫–∞).

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (–≤ –∫–æ–¥–µ –Ω–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π).
- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º `docker compose`, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ñ–∞–π–ª –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏).
- –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ (—Ä—è–¥–æ–º —Å `docker-compose.yml`) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:

```env
POSTGRES_DB=shop_db
POSTGRES_USER=shop_user
POSTGRES_PASSWORD=change_me

RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest

AUTH_JWT_SECRET=change_me_super_secret
AUTH_JWT_ALGORITHM=HS256
AUTH_JWT_EXPIRE_MINUTES=60
AUTH_DATABASE_URL=postgresql+asyncpg://shop_user:change_me@db:5432/shop_db

CATALOG_REDIS_URL=redis://redis:6379/0

ORDER_DATABASE_URL=postgresql+asyncpg://shop_user:change_me@db:5432/shop_db
ORDER_RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672//

TELEGRAM_BOT_TOKEN=123456789:ABCDEF...
TELEGRAM_AUTH_URL=http://auth_service:8000
TELEGRAM_CATALOG_URL=http://catalog_service:8000
TELEGRAM_ORDER_URL=http://order_service:8000

WEB_SESSION_SECRET=change_me_session
WEB_AUTH_URL=http://auth_service:8000
WEB_CATALOG_URL=http://catalog_service:8000
WEB_ORDER_URL=http://order_service:8000
```

> –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ `change_me` –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –ü–∞—Ä–æ–ª—å –≤ `ORDER_DATABASE_URL` –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `POSTGRES_PASSWORD`. –§–∞–π–ª `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`, –ø–æ—ç—Ç–æ–º—É —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã **Docker** –∏ **docker-compose** (–∏–ª–∏ `docker compose`).

### –®–∞–≥–∏ –∑–∞–ø—É—Å–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–º. –ø—Ä–∏–º–µ—Ä –≤—ã—à–µ) –∏ –ø—Ä–æ–ø–∏—à–∏—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤.
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram‚Äë–±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather, –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏ –ø—Ä–æ–ø–∏—à–∏—Ç–µ –≤ `.env`.
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (`WEB_SESSION_SECRET`, URL'—ã —Å–µ—Ä–≤–∏—Å–æ–≤).
4. –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (`Project_shop`) –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

   ```bash
   docker compose up --build
   ```

5. –î–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ –ø–æ–¥–Ω–∏–º—É—Ç—Å—è –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:
   - `db`, `redis`, `rabbitmq`
   - `auth_service` (–ø–æ—Ä—Ç `8001`)
   - `catalog_service` (–ø–æ—Ä—Ç `8002`)
   - `order_service` (–ø–æ—Ä—Ç `8003`)
   - `payment_service` (–ø–æ—Ä—Ç `8004`) ‚Äî –ø–æ–¥–ø–∏—Å—á–∏–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)
   - `notification_service` (–ø–æ—Ä—Ç `8005`) ‚Äî –ø–æ–¥–ø–∏—Å—á–∏–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)
   - `telegram_bot` (–≤ —Ñ–æ–Ω–µ, –±–µ–∑ –ø–æ—Ä—Ç–∞)
   - `web_app` (–ø–æ—Ä—Ç `8080`)

6. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
   - Auth: `GET http://localhost:8001/health`
   - Catalog: `GET http://localhost:8002/health`
   - Orders: `GET http://localhost:8003/health`
   - Payment: `GET http://localhost:8004/health`
   - Notification: `GET http://localhost:8005/health`
   - RabbitMQ UI: `http://localhost:15672` (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å `guest/guest`).
   - Telegram: –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–µ–º—É –±–æ—Ç—É `/start`
   - Web UI: –æ—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8080`

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT –≤ `auth_service`

```bash
curl -X POST http://localhost:8001/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"password123"}'
```

```bash
curl -X POST http://localhost:8001/auth/token \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"password123"}'
```

```bash
curl -X POST http://localhost:8001/auth/token \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"password123"}'
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```json
{"access_token": "<JWT>", "token_type": "bearer"}
```

---

### 2. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `catalog_service` (Redis)

```bash
curl http://localhost:8002/products
```

- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å:
  - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞),
  - –ø–æ–ª–æ–∂–∏—Ç –µ–≥–æ –≤ Redis –≤ –∫–ª—é—á `catalog:products`.
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ç–µ—á–µ–Ω–∏–µ ~60 —Å–µ–∫ –±—É–¥—É—Ç —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Redis.

---

### 3. –•–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è (Transaction Outbox)

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /orders` (—Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è)

–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ `order_service`:

```bash
curl -X POST http://localhost:8003/orders \
  -H "Content-Type: application/json" \
  -d '{
    "customer_email": "buyer@example.com",
    "items": [
      { "product_id": 1, "quantity": 2, "price": 500.0 },
      { "product_id": 2, "quantity": 1, "price": 1500.0 }
    ]
  }'
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. **Order Service** —Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ outbox (–≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏):
   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `orders`
   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `outbox_messages` —Å `event_type="order_created"`

2. **Outbox Worker** (—Ñ–æ–Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä) –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏:
   - –ß–∏—Ç–∞–µ—Ç –∏–∑ `outbox_messages` –≤—Å–µ `pending`
   - –ü—É–±–ª–∏–∫—É–µ—Ç –≤ RabbitMQ `shop_events` —Å–æ–±—ã—Ç–∏–µ `order.created`
   - –ü–æ–º–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∫ `sent`

3. **Payment Service** (–ø–æ–¥–ø–∏—Å—á–∏–∫):
   - –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `order.created` –∏–∑ RabbitMQ
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
   - –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `payment.processed`

4. **Notification Service** (–ø–æ–¥–ø–∏—Å—á–∏–∫):
   - –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `payment.processed` –∏–∑ RabbitMQ
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
   - –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ `notification.sent`

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
```bash
docker compose logs payment_service
docker compose logs notification_service
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤:**
```bash
curl http://localhost:8003/orders
```

---

### 4. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /orders/orchestrated` (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)

–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π –≤—Å–µ—Ö —à–∞–≥–æ–≤:

```bash
curl -X POST http://localhost:8003/orders/orchestrated \
  -H "Content-Type: application/json" \
  -d '{
    "customer_email": "buyer@example.com",
    "items": [
      { "product_id": 1, "quantity": 2, "price": 500.0 }
    ]
  }'
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. **Order Service** (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä) —Å–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑
2. **Order Service** —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `POST /payments/process` ‚Üí Payment Service
3. –ï—Å–ª–∏ –ø–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–µ–Ω, **Order Service** —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `POST /notifications/send` ‚Üí Notification Service
4. **Order Service** –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –Ω–∞ `confirmed`
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É

**–†–∞–∑–Ω–∏—Ü–∞ —Å —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏–µ–π:**
- –í—Å–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ
- Order Service **–∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç** –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å
- –ï—Å–ª–∏ –æ–¥–∏–Ω —à–∞–≥ —É–ø–∞–ª, Order Service –º–æ–∂–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- –õ–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å ‚Äî –≤—Å–µ –ª–æ–≥–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** —Å–º. [docs/ORCHESTRATION_VS_CHOREOGRAPHY.md](docs/ORCHESTRATION_VS_CHOREOGRAPHY.md)

---

### 5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

- **Telegram-–±–æ—Ç**:
  - `/start` ‚Äî –ø–æ–¥—Å–∫–∞–∑–∫–∞.
  - `/login email –ø–∞—Ä–æ–ª—å` ‚Äî –ø–æ–ª—É—á–∏—Ç—å JWT —á–µ—Ä–µ–∑ `auth_service`.
  - `/products` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –∏–∑ `catalog_service`.
  - `/order product_id:qty,...` ‚Äî –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –≤ `order_service`. –ù–∞–ø—Ä–∏–º–µ—Ä: `/order 1:2,2:1`.
- **Web UI** (`http://localhost:8080`):
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ª–æ–≥–∏–Ω —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—ã.
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ (–¥–∞–Ω–Ω—ã–µ –∏–∑ `catalog_service`).
  - –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É, —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –≤ `order_service`.


